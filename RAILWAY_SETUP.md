# Инструкция по развертыванию на Railway

## Шаг 1: Подготовка GitHub репозитория

1. Инициализируйте Git репозиторий:
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   ```

2. Создайте репозиторий на GitHub:
   - Перейдите на https://github.com/new
   - Создайте новый репозиторий (например, "dbudget")
   - НЕ добавляйте README, .gitignore или license (они уже есть)

3. Подключите и отправьте код:
   ```bash
   git remote add origin https://github.com/ваш-username/dbudget.git
   git branch -M main
   git push -u origin main
   ```

## Шаг 2: Настройка Railway

1. Зарегистрируйтесь на https://railway.app/

2. Создайте новый проект:
   - Нажмите "New Project"
   - Выберите "Deploy from GitHub repo"
   - Выберите ваш репозиторий "dbudget"

3. Добавьте PostgreSQL базу данных:
   - В вашем проекте нажмите "New"
   - Выберите "Database" → "PostgreSQL"
   - Railway автоматически создаст базу данных

4. Настройте переменные окружения:
   - Откройте настройки вашего приложения (не базы данных)
   - Перейдите в раздел "Variables"
   - Добавьте переменные:
     - `NODE_ENV` = `production`
     - `SESSION_SECRET` = (сгенерируйте случайную строку, например: "my-super-secret-key-12345")
     - `DATABASE_URL` = (Railway автоматически подставит при подключении)

5. Подключите базу данных к приложению:
   - В проекте выберите ваше приложение
   - Перейдите в "Settings" → "Service Variables"
   - Нажмите "Add Reference" и выберите вашу PostgreSQL базу
   - Выберите переменную DATABASE_URL

## Шаг 3: Развертывание

Railway автоматически:
- Установит зависимости из package.json
- Запустит приложение командой `npm start`
- Выделит публичный URL

Чтобы получить URL:
1. Откройте настройки вашего приложения
2. Перейдите в "Settings"
3. Найдите секцию "Domains"
4. Нажмите "Generate Domain"

Ваше приложение будет доступно по адресу типа:
`https://ваш-проект.railway.app`

## Шаг 4: Автоматические обновления

Теперь при каждом push в GitHub:
```bash
git add .
git commit -m "Описание изменений"
git push
```

Railway автоматически пересоберет и развернет приложение!

## Первый вход

После развертывания:
- Логин: `admin`
- Пароль: `admin123`

⚠️ ВАЖНО: Сразу после первого входа создайте нового администратора с надежным паролем и удалите стандартного админа!

## Устранение неполадок

Если приложение не запускается:
1. Проверьте логи в Railway (вкладка "Deployments")
2. Убедитесь, что DATABASE_URL подключен
3. Проверьте, что все переменные окружения установлены
4. Убедитесь, что PostgreSQL база данных запущена

## Дополнительные настройки

### Настройка домена
В Railway можно подключить свой домен:
1. Settings → Domains → Custom Domain
2. Добавьте ваш домен
3. Настройте DNS записи согласно инструкции Railway

### Резервное копирование
Railway автоматически делает снимки базы данных, но рекомендуется:
1. Экспортировать важные данные регулярно
2. Использовать дополнительное резервное копирование для критичных данных
